<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시라노 14일 무료체험</title>
    <!-- Meta Pixel Code --> 
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '240293080974266');
    fbq('track', 'PageView');
    </script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XK3RP5GK10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XK3RP5GK10');
</script>

    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #f1f1f1; /* Example background color */
        }

        .triggerImage {
            width: 100%;
            height: auto;
            display: block; /* Ensures no space below the image */
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- New Trigger Images -->
        <img class="triggerImage" src="images/f_emailsub_typage.png" alt="멤버쉽 가입 이벤트">
    </div>
    <script>
        // Updated to use class selector for multiple images
        document.querySelectorAll('.triggerImage').forEach(image => {
            image.onclick = function() {
                document.getElementById('emailPopup').style.display = 'block';
            };
        });

        document.getElementById('freeTrialButton').onclick = function() {
            document.getElementById('emailPopup').style.display = 'block';
        };

        document.getElementById('emailForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const date = new Date();
            const dateString = date.toISOString().slice(0, 10); // YYYY-MM-DD 형식
            const timeString = date.toTimeString().slice(0, 8); // HH:MM:SS 형식

            fetch('https://script.google.com/macros/s/AKfycbzj1ykDNvLAWjAXZ4yKvZUr0fwmK7UuzBvSeTCg7uEQ8i9QlQ3zmFQ0_v-qWUC63paY/exec', {
                method: 'POST',
                mode: 'no-cors', // 이 줄을 추가
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email: email,
                    date: dateString,
                    time: timeString
                })
            })
            .then(response => {
                console.log('Response received');
                return response.text(); // JSON 대신 text로 변경
            })
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });

            alert('14일 무료체험 선착순 만료 전에 회원가입을 완료하세요!');
            document.getElementById('emailPopup').style.display = 'none';
            window.location.href = 'https://cyrano.link/103';
        });

        document.getElementById('privacyLink').onclick = function() {
            document.getElementById('privacyPopup').style.display = 'block';
        };

        window.onclick = function(event) {
            if (event.target == document.getElementById('emailPopup')) {
                document.getElementById('emailPopup').style.display = 'none';
            } else if (event.target == document.getElementById('privacyPopup')) {
                document.getElementById('privacyPopup').style.display = 'none';
            }
        };
    </script>
</body>
</html>
